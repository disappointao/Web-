<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>防抖</title>
</head>
<body>
<div>
    <input type="text" id="user"/>
</div>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script>
    window.onload = function() {
        let input = document.querySelector("#user")
        let counter = 0
        input.oninput = myDebounce(onInput,500)
        // input.oninput = _.debounce(onInput,500)
        function onInput(e){
            console.log(this,e)
            counter++;
            console.log(counter)
        }
        function myDebounce(fun, delay){
          let timer = null
          return function (){
            if(timer !== null){
              clearTimeout(timer)
              timer = null
            }
            timer = setTimeout(() => {
              fun.apply(this, arguments)
            },delay)
          }
        }

        // function myDebounce(fn, time) {
        //     let timer = null
        //     return function() {
        //         let context = this
        //         let arg = arguments
        //         if(timer !== null){
        //             clearTimeout(timer)
        //             timer = null
        //         }
        //         timer = setTimeout(()=>{
        //             fn.apply(context, arg)
        //         }, time)
        //     }
        // }
    }
</script>
</body>
</html>
